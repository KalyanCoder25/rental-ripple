# Upgrade to Java 21 (LTS)

This project has been updated to target Java 21. Below are manual steps to run locally, CI changes, and troubleshooting tips.

## What changed
- `pom.xml` property `<java.version>` updated to `21`.
- `maven-compiler-plugin` added with `<release>21`.

## Local setup
1. Install JDK 21 (e.g., Eclipse Temurin / Adoptium distribution):
   - Windows (PowerShell):
     ```powershell
     choco install temurin21jdk -y
     # Or download and install manually and set JAVA_HOME
     ```
2. Set JAVA_HOME and add to PATH (PowerShell example):
   ```powershell
   $env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-21"
   setx JAVA_HOME "C:\Program Files\Eclipse Adoptium\jdk-21"
   $env:Path = $env:JAVA_HOME + '\bin;' + $env:Path
   ```
3. Verify Java install:
   ```powershell
   java -version
   # should report Java 21
   ```

## Build and test locally
1. From the `demo/` folder, run the Maven wrapper (or maven if you prefer):
   ```powershell
   cd demo
   .\mvnw -U -DskipTests package
   .\mvnw test
   ```
2. If you see compilation errors, review the error messages for unsupported APIs; most code should compile as-is if using Spring Boot 3.3.x and dependencies are up-to-date.

## CI updates (GitHub Actions / other CI)
- If you use GitHub Actions, update workflows to use `actions/setup-java@v4` with `distribution: 'temurin'` and `java-version: '21'`.

Example:
```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'
      - name: Build
        run: ./mvnw -U -DskipTests package
```

## Troubleshooting & Common Issues
- If a library is incompatible with Java 21, check for updated versions for that dependency.
- Lombok: If you see annotation-processing errors, ensure your IDE uses JDK 21 for project SDK and Lombok plugin is up-to-date.
- Native images: If building GraalVM native images, adjust native profile to supported JDK versions.
- If using container images, update Dockerfile base images to JDK 21 (Ej. `eclipse-temurin:21-jdk`)

## Next steps
1. Run `./mvnw -U -DskipTests package` locally with JAVA_HOME set to JDK 21 and resolve any compile warnings.
2. Run full test suite and fix any test failures.
3. Run static code analysis and lint for API usage changes.
4. If everything passes, prepare a branch and create a PR to merge changes.

If you want, I can attempt to run a build and tests in this environment (if you have appropriate Copilot plan) or help with specific build errors after you run them locally.

---
Generated by Copilot.
